<!doctype html>
<html lang="">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script type="module" src="/index.ts"></script>
  <link rel="stylesheet" href="/assets/index.css" />
  <style>
    section > section {
      display: grid;
      gap: 8px;
    }

    section > section > * {
      min-width: 0;
    }

    @media (width >= 768px) {
      section > section {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        grid-auto-rows: 1fr;
        gap: 16px;
      }
    }

    @media (width >= 992px) {
      section > section {
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      }
    }
  </style>
</head>

<body class="container">
  <section>
    <button id="manage">Gérer</button>
    <button id="loading">Loading</button>

    <section>
      <r-widget
        uid="favorites"
        name="Favoris"
        items='[
          {
            "id": "mind-map",
            "name": "Carte mentale",
            "icon": "<svg class=\"icon\" aria-hidden=\"true\"><use xlink:href=\"./spritemap.svg#carte-mentale\"></use></svg>"
          },
          {
            "id": "capytale",
            "name": "Capytale",
            "icon": "<svg class=\"icon\" aria-hidden=\"true\"><use xlink:href=\"./spritemap.svg#capytale\"></use></svg>",
            "link": { "href": "#B" }
          },
          {
            "id": "nextcloud",
            "name": "Espaces Nextcloud",
            "icon": "<svg class=\"icon\" aria-hidden=\"true\"><use xlink:href=\"./spritemap.svg#nextcloud\"></use></svg>",
            "link": { "href": "#C" }
          },
          {
            "id": "pod",
            "name": "Platforme vidéo",
            "icon": "<svg class=\"icon\" aria-hidden=\"true\"><use xlink:href=\"./spritemap.svg#POD\"></use></svg>",
            "link": { "href": "#D" }
          }
        ]'
        no-previous
      >
      </r-widget>

      <r-widget
        uid="vie-scolaire"
        name="Espace vie scolaire"
        link='{ "href" : "#2" }'
        deletable
      >
      </r-widget>

      <r-widget
        uid="mind-map"
        name="Cartes mentales"
        link='{ "href" : "#3" }'
        empty-icon='<svg class="icon svg-inline--fa" aria-hidden="true"><use xlink:href="./spritemap.svg#carte-mentale"></use></svg>'
        empty-text="Aucune carte mentale"
        deletable
      >
      </r-widget>

      <r-widget
        uid="mediacentre"
        name="Médiacentre"
        subtitle="Consulté récement"
        notifications="6"
        link='{ "href" : "#4" }'
        empty-discover
        deletable
      >
      </r-widget>

      <r-widget
        uid="error"
        name="Error"
        is-error
        no-next
      >
      </r-widget>
    </section>
  </section>

  <script>
    function logEvents(element, eventType) {
      element.addEventListener(eventType, (e) => {
        console.log(eventType, e.detail)
      })
    }

    const widgets = document.querySelectorAll('r-widget')
    let manage = false
    document.querySelector('button#manage').addEventListener('click', () => {
      manage = !manage
      widgets.forEach((widget) => {
        widget.manage = manage
      })
    })

    let loading = false
    document.querySelector('button#loading').addEventListener('click', () => {
      loading = !loading
      widgets.forEach((widget) => {
        widget.loading = loading
      })
    })

    widgets.forEach((widget) => {
      logEvents(widget, 'delete')
      logEvents(widget, 'move')
      logEvents(widget, 'click-on-item')
    })
  </script>
</body>

</html>
