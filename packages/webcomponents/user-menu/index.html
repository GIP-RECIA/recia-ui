<!doctype html>
<html lang="">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script type="module" src="/index.ts"></script>
  <link rel="stylesheet" href="/assets/index.css" />
  <style>
    section > section {
      display: flex;
    }

    .grow-1 {
      flex-grow: 1;
    }
  </style>
</head>

<body class="container">
  <section>
    <div>Notification</div>
    <button id="eybrow-notification-decrease">-</button>
    <span id="eybrow-notification">0</span>
    <button id="eybrow-notification-increase">+</button>

    <section>
      <div class="grow-1"></div>
      <r-user-menu
        picture="https://placehold.co/46x46"
      >
      </r-user-menu>
    </section>

    <section>
      <div class="grow-1"></div>
      <r-user-menu
        picture="https://placehold.co/46x46"
        display-name="Anaïs Durant"
        config='{
          "notification": false,
          "settings": false,
          "info-etab": {
            "icon": null
          },
          "change-etab": {
            "icon": null
          },
          "starter": false,
          "logout": {
            "link": {
              "href": "#/portail/Logout",
              "target": "_blank",
              "rel": "noopener noreferrer"
            }
          }
        }'
        notification="0"
        avatar-size="28px"
      >
      </r-user-menu>
    </section>

    <section>
      <div class="grow-1"></div>
      <r-user-menu
        picture="https://placehold.co/46x46"
        display-name="Anaïs Durant"
        function="Enseignante"
        config='{
          "settings": {
            "link": {
              "href": "#/MCE"
            }
          },
          "change-etab": {
            "link": null
          },
          "logout": {
            "link": {
              "href": "#/portail/Logout",
              "target": "_blank",
              "rel": "noopener noreferrer"
            }
          }
        }'
        notification="0"
      >
      </r-user-menu>
    </section>
  </section>

  <script type="module">
    window.addEventListener("launch", (e) => {
      console.log("launch", e.detail)
    });

    const userMenus = document.querySelectorAll('r-user-menu')
    const value = document.querySelector('#eybrow-notification')
    let notification = 0
    document.querySelector('#eybrow-notification-increase').addEventListener('click', () => {
      notification++
      value.textContent = notification
      userMenus.forEach(eyebrow => eyebrow.setAttribute('notification', notification))
    })
    document.querySelector('#eybrow-notification-decrease').addEventListener('click', () => {
      notification - 1 >= 0 ? notification-- : notification
      value.textContent = notification
      userMenus.forEach(eyebrow => eyebrow.setAttribute('notification', notification))
    })
  </script>
</body>

</html>
