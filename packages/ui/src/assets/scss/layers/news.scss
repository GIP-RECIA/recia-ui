@use 'sass:map';
@use '../recia-style' as *;

.news {
  > header {
    @extend .container;
    margin-bottom: 24px;

    > h2 {
      margin-bottom: .5rem;
    }

    > a {
      display: none
    }
  }

  > div > .news-tiles {
    @extend .container;
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 16px;
    font-weight: normal;
    line-height: 150%;

    > li {
      > .news-tile {
        display: flex;
        width: 100%;
        height: 140px;
        text-align: left;
        border-radius: 10px;
        background-color: var(--#{$prefix}body-bg);
        box-shadow: var(--#{$prefix}shadow-neutral) HEXToRGBA(var(--#{$prefix}black), .1);
        overflow: hidden;
        transition:
          outline .15s ease-out,
          box-shadow .15s ease-out;

        > .news-tile {
          &-image {
            flex: 0 0 92px;
            overflow: hidden;

            > img {
              object-fit: cover;
              height: 100%;
              width: 100%;
              transition: transform .15s ease-out;
            }
          }

          &-content {
            margin: 16px;
            overflow: hidden;
            text-overflow: ellipsis;

            > header {
              display: flex;
              flex-direction: column;

              > h3 {
                transition: color .15s ease-out;
              }

              > .context {
                order: -1;
                font-weight: 500;
                color: var(--#{$prefix}basic-black);
                opacity: .5;
                margin-bottom: 4px;
              }
            }

            > p {
              line-height: 130%;
            }
          }
        }

        &:hover,
        &:focus-visible {
          outline: 2px solid var(--#{$prefix}primary);
          box-shadow: var(--#{$prefix}shadow-hover) HEXToRGBA(var(--#{$prefix}primary), .2);

          > .news-tile {
            &-image > img {
              transform: scale(1.4);
            }

            &-content > header > h3 {
              color: var(--#{$prefix}primary);
            }
          }
        }
      }
    }
  }

  > footer {
    @extend .container;
    display: flex;
    margin-top: 24px;
  }

  @media (width >= map.get($grid-breakpoints, md)) {
    > header {
      display: flex;
      align-items: center;

      > a {
        display: inline-flex;
      }
    }

    > div > .news-tiles {
      flex-direction: row;
      flex-wrap: nowrap;
      overflow-x: auto;
      scrollbar-width: none;
      scroll-behavior: smooth;
      margin-top: -1.25rem;
      margin-bottom: -1.25rem;
      padding-top: 1.25rem;
      padding-bottom: 1.25rem;

      > li {
        display: revert !important;
        flex: 0 0 292px;

        > .news-tile {
          height: 175px;
        }
      }

      &:focus-visible {
        outline: 2px dotted var(--#{$prefix}primary);
      }
    }

    > footer {
      display: none;
    }
  }
}

%action {
  display: none;
  align-items: center;
  position: absolute;
  top: 0;
  bottom: 0;
  margin-top: auto;
  margin-bottom: auto;
}

.news {
  &-carousel {
    > .carousel {
      &-action {
        &-back {
          @extend %action;
          left: 0;
          padding-left: 16px;
          padding-right: 16px;
          background: linear-gradient(90deg, var(--#{$prefix}body-bg) 60%, rgba(255, 255, 255, 0) 100%);
        }

        &-next {
          @extend %action;
          right: 0;
          padding-right: 16px;
          padding-left: 16px;
          background: linear-gradient(270deg, var(--#{$prefix}body-bg) 60%, rgba(255, 255, 255, 0) 100%);
        }
      }
    }
  }

  @media (width >= map.get($grid-breakpoints, md)) {
    &-carousel {
      width: 100%;
      margin-right: auto;
      margin-left: auto;
      position: relative;
      @each $name, $value in $grid-breakpoints {
        @if $value != 0 {
          @media screen and (width >= $value) {
            max-width: map.get($container-max-widths, $name) + 2 * (44 + 16);
          }
        }
      }

      > .carousel {
        &-action {
          &-back,
          &-next {
            display: flex;
          }
        }

        &-container {
          padding-right: unset;
          padding-left: unset;
          max-width: unset !important;

          > li {
            &:first-child {
              margin-left: 44px + 2 * 16;
            }

            &:last-child {
              margin-right: 44px + 2 * 16;
            }
          }
        }
      }
    }
  }
}
